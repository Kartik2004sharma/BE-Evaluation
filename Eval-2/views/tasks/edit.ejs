<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

<div class="container">
    <div class="form-container">
        <h2>Edit Task</h2>
        <%- include('../partials/messages') %>
        
        <form action="/tasks/<%= task._id %>?_method=PUT" method="POST" class="task-form">
            <div class="form-group">
                <label for="title">Task Title</label>
                <input type="text" id="title" name="title" 
                       value="<%= task.title %>" required class="form-control">
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" 
                          class="form-control" rows="3"><%= task.description %></textarea>
            </div>

            <div class="form-group">
                <label for="dueDate">Due Date</label>
                <input type="datetime-local" id="dueDate" name="dueDate" 
                       value="<%= task.dueDate.toISOString().slice(0, 16) %>" 
                       required class="form-control">
            </div>

            <div class="form-group">
                <label for="priority">Priority</label>
                <select id="priority" name="priority" class="form-control" required>
                    <option value="low" <%= task.priority === 'low' ? 'selected' : '' %>>Low</option>
                    <option value="medium" <%= task.priority === 'medium' ? 'selected' : '' %>>Medium</option>
                    <option value="high" <%= task.priority === 'high' ? 'selected' : '' %>>High</option>
                </select>
            </div>

            <div class="form-group">
                <label for="status">Status</label>
                <select id="status" name="status" class="form-control" required>
                    <option value="pending" <%= task.status === 'pending' ? 'selected' : '' %>>Pending</option>
                    <option value="in-progress" <%= task.status === 'in-progress' ? 'selected' : '' %>>In Progress</option>
                    <option value="completed" <%= task.status === 'completed' ? 'selected' : '' %>>Completed</option>
                </select>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Update Task</button>
                <a href="/tasks" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

<%- include('../partials/footer') %> 